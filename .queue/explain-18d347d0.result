# Explanation of `.claude/commands/reviewtask.md`

## What This File Does

This document is an instruction manual for a command called `/reviewtask` that acts like an editor and formatter for task descriptions. Imagine you quickly jot down notes about what you need to do - maybe you even just spoke your thoughts out loud and they got transcribed. This command takes those messy, informal notes and transforms them into a clean, professional, well-organized task document that follows a specific format. It's like having an assistant who takes your rough draft and turns it into a polished, structured document with proper sections, clear language, and all the details organized properly. It can work in two modes: a quick "clean-up" mode that just fixes structure and clarity, or a thorough mode that also researches your codebase to add relevant technical context.

## Key Components

**Purpose Statement**: This explains what the command does at a high level - it transforms "raw task definitions" (your rough notes or voice transcriptions) into "professional, LLM-ready task specifications" (properly formatted documents that AI assistants can understand and work with effectively).

**Mode Selection**: The command has two operating modes:
- **Quick Mode (Default)**: Just cleans up structure and makes the language clearer - like proofreading and organizing
- **Thorough Mode**: Does everything Quick Mode does, PLUS researches your existing code to find relevant files and add helpful technical context - like having someone who also does background research

**Five-Phase Process**: This is the heart of the document, breaking down the work into five sequential steps:

1. **Phase 1 - Read Current Task**: Opens the existing task file and identifies what's already there - user input, any existing sections, and any files or features mentioned

2. **Phase 2 - Structure Validation**: Makes sure the document has all required sections in the proper format (Overview, User Story, Requirements, Acceptance Criteria, Technical Notes). Think of this like checking that a report has all mandatory sections like Introduction, Body, and Conclusion.

3. **Phase 3 - Clarity Enhancement**: Improves the writing quality by converting casual conversation to professional technical writing, spelling out abbreviations, clarifying unclear terms, adding specifics where things are vague, and removing repetition. This is the actual "editing" phase.

4. **Phase 4 - Codebase Context (Thorough Mode Only)**: This phase only runs if you specifically requested "thorough" mode. It launches a specialized research agent that searches through your codebase to find files, patterns, and integration points relevant to your task, then adds this information to the document. It also looks for a file called `STACK.md` that contains validation commands (like how to run tests).

5. **Phase 5 - Write Enhanced Task**: Saves the improved document while carefully preserving your original intent, any notes you manually added, and the checked/unchecked status of any checklist items if you've already started the task.

**Output Format Section**: This shows a template of what the final enhanced document should look like - it's like showing an example of the finished product so you know what to expect.

**Summary Output**: After finishing, the command displays a brief report of what changes it made, what improvements it applied, what context it added (in thorough mode), and suggestions for you to review.

**Important Notes**: A list of critical reminders - most importantly, this command does NOT automatically start implementing the task, it just cleans up the task description. It preserves your original meaning while improving clarity, and you can choose between quick or thorough mode.

## How It Works

**The Workflow**: When you run `/reviewtask`, the system first checks if you specified "thorough" or left it empty (which means "quick"). Then it reads your existing `TASK.md` file, which might contain rough notes, voice transcriptions, or partially complete task descriptions.

**Quick Mode Process**: In quick mode, it goes through three main steps: (1) validates that all required sections exist and adds any missing ones, (2) improves the writing by converting casual language to professional technical language, expanding abbreviations, and removing vague terms, and (3) saves the cleaned-up version while preserving your original intent and any progress you've already made.

**Thorough Mode Enhancement**: If you specified "thorough," it does everything Quick Mode does, but then adds an extra research step. It launches a specialized AI agent (called an "Explore sub-agent") that searches through your codebase looking for files, code patterns, and integration points related to your task. Think of this like having a research assistant who goes through your project files to find relevant examples and connections. The agent returns a list of relevant files with explanations of why they matter, and this gets added to your task document as additional context.

**The Transformation**: Imagine you started with messy voice notes that say something like "need to add login button uh somewhere on homepage maybe and it should save user session or something." The command would transform this into a properly structured document with sections like:
- **Overview**: "Add authentication functionality to the homepage"
- **User Story**: "As a user, I want to log in from the homepage, So that I can access personalized features"
- **Requirements**: Specific checkboxes for creating the login button, implementing session management, etc.
- **Acceptance Criteria**: Testable items like "User can successfully log in and session persists across page refreshes"

**Safety and Preservation**: Throughout the process, the command is very careful to preserve your original meaning - it's not rewriting what you want to accomplish, just organizing and clarifying how it's expressed. If you've already checked off some requirements, those checkmarks remain. Any custom notes you added stay in the document.

## Important Things to Know

**This is Preparation, Not Implementation**: A crucial point emphasized in the "Important Notes" section - this command does NOT actually implement your task or write code. It only prepares and organizes the task description. It's like the difference between writing a grocery list (what reviewtask does) versus actually going shopping (what other commands do later).

**Two Modes for Two Situations**: Quick mode is for when you just need to clean up your notes and make them readable. Thorough mode is for when your task involves working with existing code and you'd benefit from having relevant files and patterns identified upfront. You choose based on your needs - thorough mode takes longer but provides more helpful context.

**Manual Review is Required**: The command explicitly states "Do NOT run /explain after - let user verify first." This means after the command finishes cleaning up your task document, it stops and waits for you to review the changes. It doesn't automatically proceed to the next step because you might want to adjust something before moving forward.

**It's a Formatting and Clarity Tool**: Think of this command like using spell-check and auto-formatting in a word processor, but for task descriptions specifically. It ensures your task follows a standard structure, uses professional language, and includes all necessary sections - making it easier for both humans and AI to understand what needs to be done.

**The Output is Standardized**: Every enhanced task document follows the same template structure shown in the "Output Format" section. This consistency is valuable because it means task documents across different projects all look and work the same way - anyone (or any AI) can quickly find the information they need in the expected location.

**Backwards Compatible**: The document mentions that "default quick mode maintains backwards compatibility," meaning if you've been using this command before and are used to how it works, it will continue working the same way unless you specifically request thorough mode.

**Voice-to-Professional Conversion**: One particularly useful feature mentioned is converting voice transcriptions to professional written format. This means you can literally speak your task requirements out loud (perhaps while thinking through a problem), and this command will transform that casual spoken language into properly structured, professional technical documentation.

**Preserves Work in Progress**: If you've already started working on a task and checked off some requirements, the command preserves those checkmark states. It won't reset your progress - it only enhances the structure and clarity while keeping track of what you've already completed.